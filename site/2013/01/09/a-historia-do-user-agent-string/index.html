<!doctype html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8" />
	
		<title>A história do user-agent string | Open Blog</title>
	
	
		<meta name="author" content="Caio Gondim" />
	
	
		<meta name="keywords" content="navegadores, navegador, browser, user-agent string, user-agent, mosaic, netscape, mozilla, firefox, gecko, safari, webkit, konqueror, opera, internet explorer, trident, chrome, história
" />
	
	
		<meta name="description" content="No início da história da web, era uma prática comum se fazer uma detecção do navegador usado, através da user-agent string, para enviar um código otimizado aos browsers mais modernos. Mas cada novo navegador que surgia também desejava esse código, e então começaram a se disfarçar de navegadores tidos como modernos na época, em efeito cascata. E assim começa o baile de máscaras." />
	
	<meta name="language" content="pt" />
	<meta name="content-language" content="pt-BR" />
	<meta name="robots" content="all" />
	<meta name="distribution" content="Global" />
	<meta name="resource-type" content="document" />

	<link rel="icon" type="image/png" href="/assets/img/favicon.png" />
    <link href="/assets/css/screen.css?2013-02-22" media="screen, projection" rel="stylesheet" type="text/css" />
    <!--[if IE]>
    	<link href="/assets/css/ie.css?2013-02-22" media="screen, projection" rel="stylesheet" type="text/css" />
  	<![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Ubuntu:300' rel='stylesheet' type='text/css'>
</head>

<body>

	<div id="wrapper">
		
		<header id="main">
	<h1><a href="/" id="logo">.openBlog()</a></h1>
</header>
		
		<section id="content">

			<section class="post-container" itemscope itemtype="http://schema.org/BlogPosting">
				<span class="hidden" itemprop="publisher">Open Blog</span>
				<article>
					<header>
						<h1><a href="/2013/01/09/a-historia-do-user-agent-string/" itemprop="headline">A história do <span>user-agent</span> string</a></h1>
					</header>
					<section itemprop="articleBody">
						
						<figure>
							<img itemprop="thumbnailUrl" src="/images/posts/2013-01-09-a-historia-do-user-agent-string.jpg" class="post-image" alt="A história do user-agent string" title="A história do user-agent string" width="700" height="432" />
						</figure>
						
						<style>

quote {
	text-transform: uppercase;
	font-size: 28px;
	color: #ccc;
	letter-spacing: -2px;
	display: inline-block;
	font-style: italic;
}

quote strong {
	font-weight: normal;
	color: #aaa;
}

</style>
<p>No início da história da web, era uma prática comum se fazer uma detecção do navegador usado, através da <em>user-agent string</em>, para enviar um código otimizado aos <em>browsers</em> mais modernos. Mas cada novo navegador que surgia também desejava esse código, e então começaram a se disfarçar de navegadores tidos como modernos na época, em efeito cascata. E assim começa o baile de máscaras.</p>

<h2 id='mosaic'>Mosaic</h2>
<figure>
	<img alt='Mosaic 1.0 para Windows' height='200' src='/images/posts/2013-01-09-mosaic.jpg' title='Mosaic 1.0 para Windows' width='700' />
</figure>
<p>O primeiro browser, o <a href='http://www.ncsa.illinois.edu/Projects/mosaic.html'>NCSA Mosaic</a>, se identificava por um <em>user-agent string</em> bem simples. Informando apenas seu nome seguido de sua versão e o sistema operacional em que estava rodando.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Mosaic 0.9 user-agent string</span>
<span class='nx'>NCSA_Mosaic/2.0 (Windows 3.1)</span></code></pre>
</div>
<p>No exemplo acima, apenas pela <em>user-agent string</em> podemos saber que o navegador do usuário é o Mosaic, em sua versão 2.0 rodando no sistema operacional Windows 3.1. Até então não existia a mentira.</p>

<h2 id='netscape'>Netscape</h2>
<figure>
	<img alt='Netscape' height='200' src='/images/posts/2013-01-09-netscape.jpg' title='Netscape' width='700' />
</figure>
<p>Logo depois a Netscape Communications iniciou o desenvolvimento de seu <em>browser</em>, o Mozilla. Seu nome é uma abreviação de <strong>Mosaic Killer</strong>. Houveram alguns problemas com o Mosaic devido ao nome, então o projeto Mozilla foi renomeado para Netscape e se identificava como <code>Mozilla/1.0 (Win3.1)</code>.</p>
<quote>
	O nome Mozilla é uma abreviação de <strong>Mosaic Killer</strong>
</quote>
<p>A Netscape usou um <em>user-agent string</em> similar ao do Mosaic, mas adicionou algumas informações como língua, plataforma e encriptação.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Netscape 3.0 user-agent string</span>
<span class='nx'>Mozilla/3.0 (Win95; U)</span></code></pre>
</div>
<p>O exemplo acima é de um navegador Netscape rodando em sua versão 3.0 rodando no Windows 95 com uma encriptação de 128-bits (o último &#8220;U&#8221; na <em>string</em>).</p>

<p>O Netscape foi o primeiro a suportar <em>frames</em>, e esta tecnologia se tornou bastante popular. O Mosaic não suportava <em>frames</em> e, então, deu-se início ao &#8220;user agent sniffing&#8221;, a detecção do navegador do usuário no back-end. Para o Netscape eram enviados <em>frames</em>, e para o Mosaic não.</p>

<h2 id='internet_explorer'>Internet Explorer</h2>
<figure>
	<img alt='Internet Explorer 2.0' height='200' src='/images/posts/2013-01-09-ie2.jpg' title='Internet Explorer 2.0' width='700' />
</figure>
<p>Logo depois surgiu o Internet Explorer. Ele suportava <em>frames</em>, mas não era o Netscape. A Microsoft queria matar o Netscape o mais rápido possível e não iria esperar que os <em>webmasters</em> (lembram dessa palavra?) detectassem o IE de forma correta e enviassem <em>frames</em> para ele. Então ela declarou que o IE era compatível com o Mozilla (Mozilla Compatible) e começou a se disfarçar de Netscape, recebendo assim <em>frames</em>.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Internet Explorer 2.0 user-agent string</span>
<span class='nx'>Mozilla/1.22 (compatible; MSIE 2.0; Windows 95)</span></code></pre>
</div>
<h2 id='gecko'>Gecko</h2>
<figure>
	<img alt='Firefox 2.0' height='200' src='/images/posts/2013-01-09-firefox2.jpg' title='Firefox 2.0' width='700' />
</figure>
<p>A Microsoft então começou a incluir o IE junto com o Windows, matando eventualmente o Netscape. O Netscape renasceu como Mozilla (o navegador). O Mozilla construiu o Gecko, seu motor de renderização <em>open source</em>. E para ele foi feito uma especificação de como o <em>user-agent string</em> deveria ser escrito a partir de agora, a tornando ainda mais complexa.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Padrão de user-agent string do Gecko</span>
<span class='nx'>Mozilla/MozillaVersion (Platform; Encryption; OS-or-CPU; Language; PrereleaseVersion)Gecko/GeckoVersion ApplicationProduct/ApplicationProductVersion</span></code></pre>
</div>
<p>O Mozilla então se tornou o Firefox, e vários outros navegadores começaram a usar o Gecko como <em>render engine</em>. Abaixo temos exemplos de <em>user-agent strings</em> de navegadores baseados no Gecko. A versão do Mozilla nunca foi alterada da versão 5.0 desde o primeiro <em>browser</em> baseado no Gecko. E provavelmente nunca irá.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// SeaMonkey 1.1a no Linux</span>
<span class='nx'>Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1b2) Gecko/20060823 SeaMonkey/1.1a</span></code>

<code class='javascript'><span class='c1'>// Firefox 2.0.0.11 no Windows XP</span>
<span class='nx'>Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11</span></code>

<code class='javascript'><span class='c1'>// Camino 1.5.1 no Mac OS X</span>
<span class='nx'>Mozilla/5.0 (Macintosh; U; Intel Mac OS X; en; rv:1.8.1.6) Gecko/20070809 Camino/1.5.1</span></code></pre>
</div>
<h2 id='konqueror'>Konqueror</h2>
<figure>
	<img alt='Konqueror 3.5' height='200' src='/images/posts/2013-01-09-konqueror35.jpg' title='Konqueror 3.5' width='700' />
</figure>
<p>No mundo Linux a equipe do KDE estava trabalhando no Konqueror. Seu nome é uma referência ao Netscape e IE, os dois grandes browsers da história até o momento. &#8220;First comes the Navigator, then Explorer, and then the Konqueror&#8221;.</p>
<quote>
	First comes the Navigator, then Explorer, and then the <strong>Konqueror</strong>
</quote>
<p>Sua engine, a KHTML, era excelente. Mas não era o Gecko e por isso não recebia o código mais moderno. Então ele, também, começou a se apresentar como &#8220;Gecko like&#8221;.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Konqueror 3.2 no FreeBSD</span>
<span class='nx'>Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) (KHTML, like Gecko)</span></code></pre>
</div>
<h2 id='opera'>Opera</h2>
<figure>
	<img alt='Opera' height='200' src='/images/posts/2013-01-09-opera.jpg' title='Opera' width='700' />
</figure>
<p>O Opera, um pouco de saco cheio do <strong>user-agent sniffing</strong>, achou justo dar poder ao usuário de decidir que navegador ele iria se disfarçar e criou um <em>menu item</em> que dava a opção de escolha entre uma de 3 diferentes <em>user-agent string</em>. Por que não bagunçar mais ainda?</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Opera</span>
<span class='nx'>Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; en) Opera 9.51</span></code>

<code class='javascript'><span class='c1'>// Opera</span>
<span class='nx'>Mozilla/5.0 (Windows NT 6.0; U; en; rv:1.8.1) Gecko/20061208 Firefox/2.0.0 Opera 9.51</span></code>

<code class='javascript'><span class='c1'>// Opera</span>
<span class='nx'>Opera/9.51 (Windows NT 5.1; U; en)</span></code></pre>
</div>
<h2 id='safari'>Safari</h2>
<figure>
	<img alt='Safari' height='200' src='/images/posts/2013-01-09-safari.jpg' title='Safari' width='700' />
</figure>
<p>A Apple começou o desenvolvimento do Safari e utilizou o KHTML como base, criando um <em>fork</em> do projeto conhecido como WebKit. Mas como era compatível com o KHTML, também se passava por tal. O KHTML por sua vez se passava por Gecko, e todos se passavam por Mozilla. Efeito cascata.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Safari no OS X</span>
<span class='nx'>Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de) AppleWebKit/85.7 (KHTML, like Gecko)</span></code></pre>
</div>
<h2 id='chrome'>Chrome</h2>
<figure>
	<img alt='Chrome' height='200' src='/images/posts/2013-01-09-chrome.jpg' title='Chrome' width='700' />
</figure>
<p>Depois o Google decidiu fazer seu próprio navegador, e utilizou o WebKit como base. Mas como era um navegador novo e muito compatível com o Safari, se passava por tal. O WebKit por sua vez se passava por KHTML, o KHTML se passava por Gecko e, todos os outros se passavam por Mozilla. Então o Chrome foi batizado com esta enorme e complexa <em>user-agent string</em>.</p>
<div class='highlight'>
	<pre><code class='javascript'><span class='c1'>// Chrome no OS X</span>
<span class='nx'>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.26 Safari/537.22</span></code></pre>
</div>
<p>E é por isso que hoje temos essa <em>string</em> gigantesca e aparentemente sem lógica nos browsers modernos.</p>
<aside class='fonte'>
	<h3>Referência</h3>
	<ul>
		<li>→<a alt='Git Aliases' href='http://www.nczonline.net/blog/2010/01/12/history-of-the-user-agent-string/' title='History of the user-agent string'>History of the user-agent string</a> <span class='comment'>// WebAIM</span> </li>
		<li>→<a alt='Git Aliases' href='http://webaim.org/blog/user-agent-string-history/' title='History of the browser user-agent string'>History of the browser user-agent string</a> <span class='comment'>// NCZ online</span> </li>
		<li>→<a alt='Git Aliases' href='http://en.wikipedia.org/wiki/Konqueror' title='History of the browser user-agent string'>Konqueror</a> <span class='comment'>// Wikipedia</span> </li>
	</ul>
</aside>
					</section>
				</article>
			</section>

		</section><!-- end #content -->

	</div><!-- end #wrapper -->

</body>
</html>
